#+TITLE: 自适应算法
#+AUTHOR: 胡琛

* 原始策略 (区间突破系统)

** 凯特纳通道 [[https://en.wikipedia.org/wiki/Keltner_channel][Keltner Bands]]

   - 原始版本

     - 中心线：(最高价+最低价+收盘价)/3 的 N 日均线
     - 轨道：当根 K 线的最高价减去最低价的 N 日均线
     - 通道上轨：中心线 + 轨道
     - 通道下轨：中心线 - 轨道

   - 改进版本

     - 中心线：(最高价+最低价+收盘价)/3 的 N 日指数平均
     - 轨道：真实波动的 N 日均线
     - 通道上轨：中心线 + 轨道
     - 通道下轨：中心线 - 轨道
   
** 布林通道 [[https://en.wikipedia.org/wiki/Bollinger_Bands][Bollinger Bands]]
   
   - 中线：一条 N 周期的移动均线
   - 上轨：中线加上 K 乘以 N 周期的标准差 $MA+K\sigma$ 
   - 下轨：中线减去 K 乘以 N 周期的标准差 $MA-K\sigma$ 

** 唐奇安通道 [[http://www.indicatorforex.com/content/using-donchian-bands][Using Donchian Bands]]
   
   - 上轨：X 周期的最高价
   - 下轨：X 周期的最低价
   - 中线(某些情况)：(上轨+下轨)/2

* 通道类的用法
  
  - 传统做法：突破上轨，做多；突破下轨，做空
  - 反向做法：两次接触上轨，做空；两次接触下轨，做多
  - 对于中线处理：持多时，从上往下破中轨，平多仓；从下往上突破中轨，平空仓
* 自适应均线 
* 自适应通道策略
  
** 原始版本的要点 [[http://mp.weixin.qq.com/s?__biz=MjM5MDUxMzc0Mg==&mid=2656124511&idx=1&sn=44502145b3bf195b6b70593fd90a5d88&chksm=bde6317e8a91b868c9f7ac9199c37b6998d1be662e14fed1f00feb63bceb986507f9a08e7430&mpshare=1&scene=1&srcid=1101CufZF1obA7h1p3N3AuVi#rd][自适应算法]] 
   
   1. 确定基准价格，以该品种上市第一天开盘价作为基准价 S
    
   2. 从最近的行情统计波动率，确定真实波动率 TR

   3. 确定突破区间，区间上下幅度设置最小值限制

   4. 突破上区间做多；突破下区间做空

   5. 进场后基准价与每根 K 线开盘价比较，做多时， S 会不断变大；
      做空时，S 会不断变小

   6. 区间波动幅度也与最近波动率相关，窄幅震荡时，区间波幅会相应放大；
      宽幅震荡时，区间波幅会相应缩小

   7. *自适应主要应用于两个方面*:
      - 基准价并非一成不变，而是跟随开盘价呈现有效变化

      - 区间波动幅度会自适应修正

** 分析

   1. 原文使用的通道类策略属于什么策略

      [[file:self_adap_01.webp]]

      从上图可以看出，使用的策略不可能是唐奇安通道，从上下轨的折线变化，
      初步估计使用的通道类策略是凯特纳通道。

   2. +基准价的自适应性实现+

      - 参考自适应均线的策略方式，定义有效系数，有效系数大于 0.5，分为趋势存在

      - 有效系数小于 0.5，如果有持仓，平仓；否则不开仓

   3. 区间波动幅度的自适应修正

      - 如果使用凯特纳通道，中线为指数移动均线，轨道为 K 倍 =ATR=, 自适应应该体现在 =ATR= 的修正

      - 同样参考自适应均线的用法，利用平滑系数来对 =ATR= 进行修正，这样，当趋势不明显时，仅仅最近的
        =ATR= 有影响，如果趋势明显，则最近的 =ATR= 影响也会大

** 难点 

   立足之上分析的逻辑，并不能达成图示效果，仔细查看图中的开仓时机，推断开仓条件如下：
   
   1. 通道收窄，开盘价相比之前高，开多
   2. 通道放大，开盘价相比之前低，开空
   
** 灵感 (失败)
   
   1. 通道宽度的标准差，反应了行情的趋势与震荡变化
   2. 有效系数，反应了行情趋势的程度
   3. 如果将有效系数乘以通道宽度标准差，设定阈值，如果大于这个阈值，反应行情将由震荡转趋势；
      反之，则将由趋势转震荡
   4. 依然是突破上轨做多；突破下轨做空，但是加入过滤器
   5. 甚至可以在做趋势的时候，对过滤器的值加以限制，以便于更早地判断离场时机
* 自适应布林通道系统 [[https://www-users.cs.york.ac.uk/kazakov/papers/cifer2012_adapt_bollinger_bands.pdf][self adapt bollinger bands]]
  
